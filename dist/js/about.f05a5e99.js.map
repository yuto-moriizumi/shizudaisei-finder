{"version":3,"sources":["webpack:///./node_modules/core-js/modules/web.dom-collections.for-each.js","webpack:///./node_modules/core-js/internals/array-for-each.js","webpack:///./src/views/Find.vue","webpack:///./src/views/Find.vue?1f45","webpack:///./src/views/Find.vue?d9dd","webpack:///./node_modules/core-js/modules/es.array.for-each.js","webpack:///./node_modules/core-js/modules/es.object.entries.js","webpack:///./node_modules/core-js/internals/object-to-array.js","webpack:///./node_modules/core-js/modules/es.array.find.js","webpack:///./node_modules/core-js/modules/es.array.join.js","webpack:///./node_modules/core-js/internals/array-method-is-strict.js"],"names":["global","DOMIterables","forEach","createNonEnumerableProperty","COLLECTION_NAME","Collection","CollectionPrototype","prototype","error","$forEach","arrayMethodIsStrict","arrayMethodUsesToLength","STRICT_METHOD","USES_TO_LENGTH","module","exports","callbackfn","this","arguments","length","undefined","class","for","aria-hidden","src","profileImgUrl","alt","name","find","type","from","to","id","include_follow","faculties","faculty","key","include","follow","showFollowAlert","followedCount","aria-label","notFound","users","user","USER_ID","showButton","Array","hss","edu","sci","agr","inf","eng","req","XMLHttpRequest","open","send","onloadend","RESPONCE_TEXT","JSON","parse","responseText","console","log","window","location","href","img_url","event","preventDefault","query","Object","entries","map","entry","join","ID","USER_NAME","USER_SCREEN_NAME","screen_name","IMG","CONTENT","content","CREATED_AT","created_at","IS_FOLLOWING","is_following","components","UserCard","render","$","target","proto","forced","$entries","stat","O","DESCRIPTORS","objectKeys","toIndexedObject","propertyIsEnumerable","f","createMethod","TO_ENTRIES","it","keys","i","result","call","push","values","$find","addToUnscopables","FIND","SKIPS_HOLES","IndexedObject","nativeJoin","ES3_STRINGS","separator","fails","METHOD_NAME","argument","method"],"mappings":"4FAAA,IAAIA,EAAS,EAAQ,QACjBC,EAAe,EAAQ,QACvBC,EAAU,EAAQ,QAClBC,EAA8B,EAAQ,QAE1C,IAAK,IAAIC,KAAmBH,EAAc,CACxC,IAAII,EAAaL,EAAOI,GACpBE,EAAsBD,GAAcA,EAAWE,UAEnD,GAAID,GAAuBA,EAAoBJ,UAAYA,EAAS,IAClEC,EAA4BG,EAAqB,UAAWJ,GAC5D,MAAOM,GACPF,EAAoBJ,QAAUA,K,oCCXlC,IAAIO,EAAW,EAAQ,QAAgCP,QACnDQ,EAAsB,EAAQ,QAC9BC,EAA0B,EAAQ,QAElCC,EAAgBF,EAAoB,WACpCG,EAAiBF,EAAwB,WAI7CG,EAAOC,QAAYH,GAAkBC,EAEjC,GAAGX,QAFgD,SAAiBc,GACtE,OAAOP,EAASQ,KAAMD,EAAYE,UAAUC,OAAS,EAAID,UAAU,QAAKE,K,kFCVnEC,MAAM,mB,GACJA,MAAM,2B,GACJA,MAAM,0B,GACNA,MAAM,gB,GAMVA,MAAM,mB,GACJA,MAAM,O,EACT,eAA4B,OAAvBA,MAAM,YAAU,S,GAChBA,MAAM,O,EACT,eAA8C,MAA1CA,MAAM,4BAA2B,QAAI,G,GAElCA,MAAM,4B,EAET,eAA0B,KAAvBA,MAAM,YAAW,MAAE,G,EAEtB,eAA0B,KAAvBA,MAAM,YAAW,MAAE,G,GACjBA,MAAM,2C,EAOT,eAEC,SAFMA,MAAM,uBAAuBC,IAAI,kBACrC,gBAAY,G,GAITD,MAAM,Q,GACTA,MAAM,4B,EACT,eAA0D,UAAlDA,MAAM,kCAAiC,MAAE,G,EAiBnD,eAEC,SAFMA,MAAM,cACV,yCAAqC,G,EAG1C,eAEM,OAFDA,MAAM,eAAa,CACtB,eAAiD,UAAzCA,MAAM,yBAAwB,Q,MAGrCA,MAAM,+B,EACT,eAA8D,MAA1DA,MAAM,4CAA2C,QAAI,G,SAQtDA,MAAM,uB,EAQP,eAAuC,QAAjCE,cAAY,QAAO,KAAO,G,SAG/BF,MAAM,a,EACT,eAEM,OAFDA,MAAM,0BAAyB,qBAEpC,G,EAGJ,eAA4B,OAAvBA,MAAM,YAAU,S,GAGpBA,MAAM,mB,GACJA,MAAM,a,6GAzFb,eAQM,MARN,EAQM,CAPJ,eAMM,MANN,EAMM,CALJ,eAIM,MAJN,EAIM,CAHJ,eAEI,IAFJ,EAEI,CADF,eAAmC,OAA7BG,IAAK,EAAAC,cAAeC,IAAI,I,+BAAK,oBAAiB,eAAG,EAAAC,MAAI,WAKnE,eA8EM,MA9EN,EA8EM,CA7EJ,eA4EM,MA5EN,EA4EM,CA3EJ,EACA,eAwEM,MAxEN,EAwEM,CAvEJ,EACA,eA4CO,QA5CDN,MAAM,YAAa,SAAM,8BAAE,EAAAO,KAAA,sB,CAC/B,eAgBM,MAhBN,EAgBM,C,eAfJ,eAAkE,SAA3DC,KAAK,OAAOR,MAAM,wB,qDAAiC,EAAAS,KAAI,K,mBAAJ,EAAAA,QAC1D,E,eACA,eAAgE,SAAzDD,KAAK,OAAOR,MAAM,wB,qDAAiC,EAAAU,GAAE,K,mBAAF,EAAAA,MAC1D,EACA,eAUM,MAVN,EAUM,C,eATJ,eAKE,SAJAC,GAAG,iBACHH,KAAK,WACLR,MAAM,uB,qDACG,EAAAY,eAAc,K,mBAAd,EAAAA,kBAEX,MAKJ,eAsBW,WAtBX,EAsBW,CArBT,eAiBM,MAjBN,EAiBM,CAhBJ,G,mBACA,eAcM,2BAZqB,EAAAC,WAAS,SAA1BC,EAASC,G,wBAFnB,eAcM,OAbJf,MAAM,8EAELe,IAAKA,G,gBAEN,eAKE,SAJCJ,GAAII,EACLP,KAAK,WACLR,MAAM,uB,yCACG,EAAAa,UAAUE,GAAKC,QAAO,I,8CAAtB,EAAAH,UAAUE,GAAKC,WAE1B,eAEU,SAFHhB,MAAM,uBAAwBC,IAAKc,G,eACxCD,EAAQR,MAAI,gB,QAIlB,IAIF,G,IAIF,eAQM,MARN,EAQM,CAPJ,EACA,eAKS,UAJPN,MAAM,4EACD,QAAK,8BAAE,EAAAiB,OAAA,sBACb,cAIoC,EAAAC,iB,iBAAvC,eAUM,MAVN,EAUM,C,8BATD,EAAAC,eAAgB,aACnB,kBAOS,UANPX,KAAK,SACLR,MAAM,QACNoB,aAAW,QACN,QAAK,+BAAE,EAAAF,iBAAe,K,CAE3B,O,sBAGyB,EAAAG,U,iBAA7B,eAIM,MAJN,EAIM,CAHJ,K,wBAKJ,MAGJ,eASM,MATN,EASM,CARJ,eAOM,MAPN,EAOM,E,mBANJ,eAKE,2BAJe,EAAAC,OAAK,SAAbC,G,wBADT,eAKE,GAHOR,IAAKQ,EAAKC,QACVD,KAAMA,EACZE,YAAY,G,6KCrFA,EAArB,yG,0BACE,EAAAnB,KAAO,GACP,EAAAF,cAAgB,mBAChB,EAAAK,KAAO,aACP,EAAAC,GAAK,aACL,EAAAE,gBAAiB,EACjB,EAAAU,MAAQI,QACR,EAAAR,iBAAkB,EAClB,EAAAC,cAAgB,EAChB,EAAAE,UAAW,EACX,EAAAR,UAAY,CACVc,IAAK,CAAErB,KAAM,UAAWU,SAAS,GACjCY,IAAK,CAAEtB,KAAM,OAAQU,SAAS,GAC9Ba,IAAK,CAAEvB,KAAM,MAAOU,SAAS,GAC7Bc,IAAK,CAAExB,KAAM,MAAOU,SAAS,GAC7Be,IAAK,CAAEzB,KAAM,OAAQU,SAAS,GAC9BgB,IAAK,CAAE1B,KAAM,MAAOU,SAAS,IAhBjC,2DAmBS,WACCiB,EAAM,IAAIC,eAChBD,EAAIE,KAAK,MAAO,sBAChBF,EAAIG,KAAK,MACTH,EAAII,UAAY,WACd,IAAMC,EAAgBC,KAAKC,MAAMP,EAAIQ,cACrCC,QAAQC,IAAIL,GACZ,EAAKhC,KAAOgC,EAAchC,KACR,OAAd,EAAKA,OAAesC,OAAOC,SAASC,KAAO,uBAC/C,EAAK1C,cAAgBkC,EAAcS,WA5BzC,2BAgCOC,GAAU,WACbA,EAAMC,iBACNrD,KAAKsB,iBAAkB,EACvBwB,QAAQC,IAAI/C,KAAKa,KAAMb,KAAKc,GAAId,KAAKgB,gBACrC,IAAMqB,EAAM,IAAIC,eACVgB,EACJ,sBACAtD,KAAKa,KACL,OACAb,KAAKc,GACL,mBACAd,KAAKgB,eACLuC,OAAOC,QAAQxD,KAAKiB,WACjBwC,KAAI,SAACC,GACJ,MAAO,IAAMA,EAAM,GAAK,IAAMA,EAAM,GAAGtC,WAExCuC,KAAK,IACVb,QAAQC,IAAIO,GACZjB,EAAIE,KAAK,MAAOe,GAChBjB,EAAIG,KAAK,MACTH,EAAII,UAAY,WACd,IAAMC,EAAgBC,KAAKC,MAAMP,EAAIQ,cACrCC,QAAQC,IAAIL,GAEZ,EAAKhB,MAAQgB,EAAchB,MAAM+B,KAAI,SAAC9B,GACpC,MAAO,CACLiC,GAAIjC,EAAKZ,GACT8C,UAAWlC,EAAKjB,KAChBoD,iBAAkBnC,EAAKoC,YACvBC,IAAKrC,EAAKwB,QACVc,QAAStC,EAAKuC,QACdC,WAAYxC,EAAKyC,WACjBC,aAAc1C,EAAK2C,iBAGvB,EAAK7C,SAAgC,GAArB,EAAKC,MAAMxB,UAnEjC,+BAuEQ,WACJF,KAAKuB,cAAgB,EACrBvB,KAAK0B,MAAMzC,SAAQ,SAAC0C,GAClB,IAA0B,IAAtBA,EAAK0C,aAAT,CACA,IAAMhC,EAAM,IAAIC,eAChBD,EAAIE,KAAK,MAAO,uBAAyBZ,EAAKiC,IAC9CvB,EAAIG,KAAK,MACTH,EAAII,UAAY,WACd,IAAMC,EAAgBC,KAAKC,MAAMP,EAAIQ,cACrCC,QAAQC,IAAIL,GACZ,EAAKnB,eAAiB,EACtBI,EAAK0C,cAAe,OAGxBrE,KAAKsB,iBAAkB,MArF3B,GAAkC,QAAb,EAAI,gBALxB,eAAQ,CACPiD,WAAY,CACVC,WAAA,SAGiB,WCPrB,EAAOC,OAASA,EAED,gB,kCCJf,IAAIC,EAAI,EAAQ,QACZzF,EAAU,EAAQ,QAItByF,EAAE,CAAEC,OAAQ,QAASC,OAAO,EAAMC,OAAQ,GAAG5F,SAAWA,GAAW,CACjEA,QAASA,K,uBCPX,IAAIyF,EAAI,EAAQ,QACZI,EAAW,EAAQ,QAAgCtB,QAIvDkB,EAAE,CAAEC,OAAQ,SAAUI,MAAM,GAAQ,CAClCvB,QAAS,SAAiBwB,GACxB,OAAOF,EAASE,O,uBCPpB,IAAIC,EAAc,EAAQ,QACtBC,EAAa,EAAQ,QACrBC,EAAkB,EAAQ,QAC1BC,EAAuB,EAAQ,QAA8CC,EAG7EC,EAAe,SAAUC,GAC3B,OAAO,SAAUC,GACf,IAKIrE,EALA6D,EAAIG,EAAgBK,GACpBC,EAAOP,EAAWF,GAClB9E,EAASuF,EAAKvF,OACdwF,EAAI,EACJC,EAAS,GAEb,MAAOzF,EAASwF,EACdvE,EAAMsE,EAAKC,KACNT,IAAeG,EAAqBQ,KAAKZ,EAAG7D,IAC/CwE,EAAOE,KAAKN,EAAa,CAACpE,EAAK6D,EAAE7D,IAAQ6D,EAAE7D,IAG/C,OAAOwE,IAIX9F,EAAOC,QAAU,CAGf0D,QAAS8B,GAAa,GAGtBQ,OAAQR,GAAa,K,oCC7BvB,IAAIZ,EAAI,EAAQ,QACZqB,EAAQ,EAAQ,QAAgCpF,KAChDqF,EAAmB,EAAQ,QAC3BtG,EAA0B,EAAQ,QAElCuG,EAAO,OACPC,GAAc,EAEdtG,EAAiBF,EAAwBuG,GAGzCA,IAAQ,IAAInE,MAAM,GAAGmE,IAAM,WAAcC,GAAc,KAI3DxB,EAAE,CAAEC,OAAQ,QAASC,OAAO,EAAMC,OAAQqB,IAAgBtG,GAAkB,CAC1Ee,KAAM,SAAcZ,GAClB,OAAOgG,EAAM/F,KAAMD,EAAYE,UAAUC,OAAS,EAAID,UAAU,QAAKE,MAKzE6F,EAAiBC,I,kCCtBjB,IAAIvB,EAAI,EAAQ,QACZyB,EAAgB,EAAQ,QACxBhB,EAAkB,EAAQ,QAC1B1F,EAAsB,EAAQ,QAE9B2G,EAAa,GAAGzC,KAEhB0C,EAAcF,GAAiB5C,OAC/B5D,EAAgBF,EAAoB,OAAQ,KAIhDiF,EAAE,CAAEC,OAAQ,QAASC,OAAO,EAAMC,OAAQwB,IAAgB1G,GAAiB,CACzEgE,KAAM,SAAc2C,GAClB,OAAOF,EAAWR,KAAKT,EAAgBnF,WAAqBG,IAAdmG,EAA0B,IAAMA,O,kCCdlF,IAAIC,EAAQ,EAAQ,QAEpB1G,EAAOC,QAAU,SAAU0G,EAAaC,GACtC,IAAIC,EAAS,GAAGF,GAChB,QAASE,GAAUH,GAAM,WAEvBG,EAAOd,KAAK,KAAMa,GAAY,WAAc,MAAM,GAAM","file":"js/about.f05a5e99.js","sourcesContent":["var global = require('../internals/global');\nvar DOMIterables = require('../internals/dom-iterables');\nvar forEach = require('../internals/array-for-each');\nvar createNonEnumerableProperty = require('../internals/create-non-enumerable-property');\n\nfor (var COLLECTION_NAME in DOMIterables) {\n  var Collection = global[COLLECTION_NAME];\n  var CollectionPrototype = Collection && Collection.prototype;\n  // some Chrome versions have non-configurable methods on DOMTokenList\n  if (CollectionPrototype && CollectionPrototype.forEach !== forEach) try {\n    createNonEnumerableProperty(CollectionPrototype, 'forEach', forEach);\n  } catch (error) {\n    CollectionPrototype.forEach = forEach;\n  }\n}\n","'use strict';\nvar $forEach = require('../internals/array-iteration').forEach;\nvar arrayMethodIsStrict = require('../internals/array-method-is-strict');\nvar arrayMethodUsesToLength = require('../internals/array-method-uses-to-length');\n\nvar STRICT_METHOD = arrayMethodIsStrict('forEach');\nvar USES_TO_LENGTH = arrayMethodUsesToLength('forEach');\n\n// `Array.prototype.forEach` method implementation\n// https://tc39.github.io/ecma262/#sec-array.prototype.foreach\nmodule.exports = (!STRICT_METHOD || !USES_TO_LENGTH) ? function forEach(callbackfn /* , thisArg */) {\n  return $forEach(this, callbackfn, arguments.length > 1 ? arguments[1] : undefined);\n} : [].forEach;\n","<template>\r\n  <div class=\"container-fluid\">\r\n    <div class=\"alert alert-primary p-0\">\r\n      <div class=\"row align-items-center\">\r\n        <p class=\"mx-auto mb-0\">\r\n          <img :src=\"profileImgUrl\" alt=\"\" />You logged in as {{ name }}\r\n        </p>\r\n      </div>\r\n    </div>\r\n  </div>\r\n  <div class=\"container-fluid\">\r\n    <div class=\"row\">\r\n      <div class=\"col-xl-1\"></div>\r\n      <div class=\"col\">\r\n        <h1 class=\"text-center text-sm-left\">検索条件</h1>\r\n        <form class=\"mx-5 mb-3\" @submit=\"find\">\r\n          <div class=\"row align-items-baseline\">\r\n            <input type=\"date\" class=\"col-auto from-control\" v-model=\"from\" />\r\n            <p class=\"col-auto\">から</p>\r\n            <input type=\"date\" class=\"col-auto from-control\" v-model=\"to\" />\r\n            <p class=\"col-auto\">まで</p>\r\n            <div class=\"custom-control custom-checkbox col-auto\">\r\n              <input\r\n                id=\"include_follow\"\r\n                type=\"checkbox\"\r\n                class=\"custom-control-input\"\r\n                v-model=\"include_follow\"\r\n              />\r\n              <label class=\"custom-control-label\" for=\"include_follow\"\r\n                >フォローしている人を含む</label\r\n              >\r\n            </div>\r\n          </div>\r\n          <fieldset class=\"mb-3\">\r\n            <div class=\"row align-items-baseline\">\r\n              <legend class=\"col-form-label col-12 col-lg-1\">学部</legend>\r\n              <div\r\n                class=\"custom-control custom-checkbox col-12 col-sm-6 col-md-4 col-lg-auto mr-xl-4\"\r\n                v-for=\"(faculty, key) in faculties\"\r\n                :key=\"key\"\r\n              >\r\n                <input\r\n                  :id=\"key\"\r\n                  type=\"checkbox\"\r\n                  class=\"custom-control-input\"\r\n                  v-model=\"faculties[key].include\"\r\n                />\r\n                <label class=\"custom-control-label\" :for=\"key\">{{\r\n                  faculty.name\r\n                }}</label>\r\n              </div>\r\n            </div>\r\n            <small class=\"text-muted\"\r\n              >チェックを外すとその学部と思われるユーザを除外します（正確ではありません）</small\r\n            >\r\n          </fieldset>\r\n          <div class=\"text-center\">\r\n            <button class=\"btn btn-primary col-8\">検索</button>\r\n          </div>\r\n        </form>\r\n        <div class=\"row align-items-center mb-2\">\r\n          <h1 class=\"col-12 col-sm-6 text-center text-sm-left\">検索結果</h1>\r\n          <button\r\n            class=\"btn btn-primary btn-lg col-8 col-sm-auto text-center text-sm-left mx-auto\"\r\n            v-on:click=\"follow\"\r\n          >\r\n            一括フォロー\r\n          </button>\r\n        </div>\r\n        <div class=\"alert alert-success\" v-if=\"showFollowAlert\">\r\n          {{ followedCount }}人フォローしました\r\n          <button\r\n            type=\"button\"\r\n            class=\"close\"\r\n            aria-label=\"Close\"\r\n            v-on:click=\"showFollowAlert = false\"\r\n          >\r\n            <span aria-hidden=\"true\">&times;</span>\r\n          </button>\r\n        </div>\r\n        <div class=\"container\" v-if=\"notFound\">\r\n          <div class=\"alert alert-danger row\">\r\n            検索結果が見つかりませんでした\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <div class=\"col-xl-1\"></div>\r\n    </div>\r\n  </div>\r\n  <div class=\"container-fluid\">\r\n    <div class=\"card-deck\">\r\n      <UserCard\r\n        v-for=\"user in users\"\r\n        v-bind:key=\"user.USER_ID\"\r\n        v-bind:user=\"user\"\r\n        :showButton=\"true\"\r\n      />\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script lang=\"ts\">\r\nimport { Options, Vue } from \"vue-class-component\";\r\nimport UserCard from \"@/components/UserCard.vue\";\r\nimport { User, UserResponce } from \"@/components/User\";\r\n\r\n@Options({\r\n  components: {\r\n    UserCard,\r\n  },\r\n})\r\nexport default class Find extends Vue {\r\n  name = \"\";\r\n  profileImgUrl = \"./img/github.png\";\r\n  from = \"2020-01-01\";\r\n  to = \"2020-12-31\";\r\n  include_follow = false;\r\n  users = Array<User>();\r\n  showFollowAlert = false;\r\n  followedCount = 0;\r\n  notFound = false;\r\n  faculties = {\r\n    hss: { name: \"人文社会科学部\", include: true },\r\n    edu: { name: \"教育学部\", include: true },\r\n    sci: { name: \"理学部\", include: true },\r\n    agr: { name: \"農学部\", include: true },\r\n    inf: { name: \"情報学部\", include: true },\r\n    eng: { name: \"工学部\", include: true },\r\n  };\r\n\r\n  mounted() {\r\n    const req = new XMLHttpRequest();\r\n    req.open(\"GET\", \"../api/users/auth/\");\r\n    req.send(null);\r\n    req.onloadend = () => {\r\n      const RESPONCE_TEXT = JSON.parse(req.responseText);\r\n      console.log(RESPONCE_TEXT);\r\n      this.name = RESPONCE_TEXT.name;\r\n      if (this.name === null) window.location.href = \"../twitter/auth.php\"; //未認証であれば認証にリダイレクト\r\n      this.profileImgUrl = RESPONCE_TEXT.img_url;\r\n    };\r\n  }\r\n\r\n  find(event: any) {\r\n    event.preventDefault();\r\n    this.showFollowAlert = false;\r\n    console.log(this.from, this.to, this.include_follow);\r\n    const req = new XMLHttpRequest();\r\n    const query =\r\n      \"../api/users/?from=\" +\r\n      this.from +\r\n      \"&to=\" +\r\n      this.to +\r\n      \"&include_follow=\" +\r\n      this.include_follow +\r\n      Object.entries(this.faculties)\r\n        .map((entry) => {\r\n          return \"&\" + entry[0] + \"=\" + entry[1].include;\r\n        })\r\n        .join(\"\");\r\n    console.log(query);\r\n    req.open(\"GET\", query);\r\n    req.send(null);\r\n    req.onloadend = () => {\r\n      const RESPONCE_TEXT = JSON.parse(req.responseText);\r\n      console.log(RESPONCE_TEXT);\r\n\r\n      this.users = RESPONCE_TEXT.users.map((user: UserResponce) => {\r\n        return {\r\n          ID: user.id,\r\n          USER_NAME: user.name,\r\n          USER_SCREEN_NAME: user.screen_name,\r\n          IMG: user.img_url,\r\n          CONTENT: user.content,\r\n          CREATED_AT: user.created_at,\r\n          IS_FOLLOWING: user.is_following,\r\n        };\r\n      });\r\n      this.notFound = this.users.length == 0;\r\n    };\r\n  }\r\n\r\n  follow() {\r\n    this.followedCount = 0;\r\n    this.users.forEach((user) => {\r\n      if (user.IS_FOLLOWING !== false) return; //フォロー済か対象ユーザが見つからなかったなら何もしない\r\n      const req = new XMLHttpRequest();\r\n      req.open(\"GET\", \"../api/users/follow/\" + user.ID);\r\n      req.send(null);\r\n      req.onloadend = () => {\r\n        const RESPONCE_TEXT = JSON.parse(req.responseText);\r\n        console.log(RESPONCE_TEXT);\r\n        this.followedCount += 1;\r\n        user.IS_FOLLOWING = true;\r\n      };\r\n    });\r\n    this.showFollowAlert = true;\r\n  }\r\n}\r\n</script>\r\n","\r\nimport { Options, Vue } from \"vue-class-component\";\r\nimport UserCard from \"@/components/UserCard.vue\";\r\nimport { User, UserResponce } from \"@/components/User\";\r\n\r\n@Options({\r\n  components: {\r\n    UserCard,\r\n  },\r\n})\r\nexport default class Find extends Vue {\r\n  name = \"\";\r\n  profileImgUrl = \"./img/github.png\";\r\n  from = \"2020-01-01\";\r\n  to = \"2020-12-31\";\r\n  include_follow = false;\r\n  users = Array<User>();\r\n  showFollowAlert = false;\r\n  followedCount = 0;\r\n  notFound = false;\r\n  faculties = {\r\n    hss: { name: \"人文社会科学部\", include: true },\r\n    edu: { name: \"教育学部\", include: true },\r\n    sci: { name: \"理学部\", include: true },\r\n    agr: { name: \"農学部\", include: true },\r\n    inf: { name: \"情報学部\", include: true },\r\n    eng: { name: \"工学部\", include: true },\r\n  };\r\n\r\n  mounted() {\r\n    const req = new XMLHttpRequest();\r\n    req.open(\"GET\", \"../api/users/auth/\");\r\n    req.send(null);\r\n    req.onloadend = () => {\r\n      const RESPONCE_TEXT = JSON.parse(req.responseText);\r\n      console.log(RESPONCE_TEXT);\r\n      this.name = RESPONCE_TEXT.name;\r\n      if (this.name === null) window.location.href = \"../twitter/auth.php\"; //未認証であれば認証にリダイレクト\r\n      this.profileImgUrl = RESPONCE_TEXT.img_url;\r\n    };\r\n  }\r\n\r\n  find(event: any) {\r\n    event.preventDefault();\r\n    this.showFollowAlert = false;\r\n    console.log(this.from, this.to, this.include_follow);\r\n    const req = new XMLHttpRequest();\r\n    const query =\r\n      \"../api/users/?from=\" +\r\n      this.from +\r\n      \"&to=\" +\r\n      this.to +\r\n      \"&include_follow=\" +\r\n      this.include_follow +\r\n      Object.entries(this.faculties)\r\n        .map((entry) => {\r\n          return \"&\" + entry[0] + \"=\" + entry[1].include;\r\n        })\r\n        .join(\"\");\r\n    console.log(query);\r\n    req.open(\"GET\", query);\r\n    req.send(null);\r\n    req.onloadend = () => {\r\n      const RESPONCE_TEXT = JSON.parse(req.responseText);\r\n      console.log(RESPONCE_TEXT);\r\n\r\n      this.users = RESPONCE_TEXT.users.map((user: UserResponce) => {\r\n        return {\r\n          ID: user.id,\r\n          USER_NAME: user.name,\r\n          USER_SCREEN_NAME: user.screen_name,\r\n          IMG: user.img_url,\r\n          CONTENT: user.content,\r\n          CREATED_AT: user.created_at,\r\n          IS_FOLLOWING: user.is_following,\r\n        };\r\n      });\r\n      this.notFound = this.users.length == 0;\r\n    };\r\n  }\r\n\r\n  follow() {\r\n    this.followedCount = 0;\r\n    this.users.forEach((user) => {\r\n      if (user.IS_FOLLOWING !== false) return; //フォロー済か対象ユーザが見つからなかったなら何もしない\r\n      const req = new XMLHttpRequest();\r\n      req.open(\"GET\", \"../api/users/follow/\" + user.ID);\r\n      req.send(null);\r\n      req.onloadend = () => {\r\n        const RESPONCE_TEXT = JSON.parse(req.responseText);\r\n        console.log(RESPONCE_TEXT);\r\n        this.followedCount += 1;\r\n        user.IS_FOLLOWING = true;\r\n      };\r\n    });\r\n    this.showFollowAlert = true;\r\n  }\r\n}\r\n","import { render } from \"./Find.vue?vue&type=template&id=13a886b8&bindings={}\"\nimport script from \"./Find.vue?vue&type=script&lang=ts\"\nexport * from \"./Find.vue?vue&type=script&lang=ts\"\nscript.render = render\n\nexport default script","'use strict';\nvar $ = require('../internals/export');\nvar forEach = require('../internals/array-for-each');\n\n// `Array.prototype.forEach` method\n// https://tc39.github.io/ecma262/#sec-array.prototype.foreach\n$({ target: 'Array', proto: true, forced: [].forEach != forEach }, {\n  forEach: forEach\n});\n","var $ = require('../internals/export');\nvar $entries = require('../internals/object-to-array').entries;\n\n// `Object.entries` method\n// https://tc39.github.io/ecma262/#sec-object.entries\n$({ target: 'Object', stat: true }, {\n  entries: function entries(O) {\n    return $entries(O);\n  }\n});\n","var DESCRIPTORS = require('../internals/descriptors');\nvar objectKeys = require('../internals/object-keys');\nvar toIndexedObject = require('../internals/to-indexed-object');\nvar propertyIsEnumerable = require('../internals/object-property-is-enumerable').f;\n\n// `Object.{ entries, values }` methods implementation\nvar createMethod = function (TO_ENTRIES) {\n  return function (it) {\n    var O = toIndexedObject(it);\n    var keys = objectKeys(O);\n    var length = keys.length;\n    var i = 0;\n    var result = [];\n    var key;\n    while (length > i) {\n      key = keys[i++];\n      if (!DESCRIPTORS || propertyIsEnumerable.call(O, key)) {\n        result.push(TO_ENTRIES ? [key, O[key]] : O[key]);\n      }\n    }\n    return result;\n  };\n};\n\nmodule.exports = {\n  // `Object.entries` method\n  // https://tc39.github.io/ecma262/#sec-object.entries\n  entries: createMethod(true),\n  // `Object.values` method\n  // https://tc39.github.io/ecma262/#sec-object.values\n  values: createMethod(false)\n};\n","'use strict';\nvar $ = require('../internals/export');\nvar $find = require('../internals/array-iteration').find;\nvar addToUnscopables = require('../internals/add-to-unscopables');\nvar arrayMethodUsesToLength = require('../internals/array-method-uses-to-length');\n\nvar FIND = 'find';\nvar SKIPS_HOLES = true;\n\nvar USES_TO_LENGTH = arrayMethodUsesToLength(FIND);\n\n// Shouldn't skip holes\nif (FIND in []) Array(1)[FIND](function () { SKIPS_HOLES = false; });\n\n// `Array.prototype.find` method\n// https://tc39.github.io/ecma262/#sec-array.prototype.find\n$({ target: 'Array', proto: true, forced: SKIPS_HOLES || !USES_TO_LENGTH }, {\n  find: function find(callbackfn /* , that = undefined */) {\n    return $find(this, callbackfn, arguments.length > 1 ? arguments[1] : undefined);\n  }\n});\n\n// https://tc39.github.io/ecma262/#sec-array.prototype-@@unscopables\naddToUnscopables(FIND);\n","'use strict';\nvar $ = require('../internals/export');\nvar IndexedObject = require('../internals/indexed-object');\nvar toIndexedObject = require('../internals/to-indexed-object');\nvar arrayMethodIsStrict = require('../internals/array-method-is-strict');\n\nvar nativeJoin = [].join;\n\nvar ES3_STRINGS = IndexedObject != Object;\nvar STRICT_METHOD = arrayMethodIsStrict('join', ',');\n\n// `Array.prototype.join` method\n// https://tc39.github.io/ecma262/#sec-array.prototype.join\n$({ target: 'Array', proto: true, forced: ES3_STRINGS || !STRICT_METHOD }, {\n  join: function join(separator) {\n    return nativeJoin.call(toIndexedObject(this), separator === undefined ? ',' : separator);\n  }\n});\n","'use strict';\nvar fails = require('../internals/fails');\n\nmodule.exports = function (METHOD_NAME, argument) {\n  var method = [][METHOD_NAME];\n  return !!method && fails(function () {\n    // eslint-disable-next-line no-useless-call,no-throw-literal\n    method.call(null, argument || function () { throw 1; }, 1);\n  });\n};\n"],"sourceRoot":""}